Feature: UI для создания аннотаций
  Как пользователь приложения
  Я хочу создавать аннотации для выделенных регионов
  Чтобы отмечать события в аудио

  Background:
    Given Flask приложение запущено

  Scenario: Модальное окно для создания аннотации
    When я открываю главную страницу "/"
    Then должен быть элемент модального окна для создания аннотации
    And модальное окно должно быть скрыто по умолчанию

  Scenario: Модальное окно использует собственный overlay
    When я открываю главную страницу "/"
    Then скрипт annotation-form должен использовать overlay "annotation-modal-overlay"

  Scenario: Поля формы аннотации
    When я открываю главную страницу "/"
    Then в модальном окне должно быть поле "event_label" типа text
    And в модальном окне должно быть поле "confidence" типа range (slider)
    And в модальном окне должно быть поле "notes" типа textarea
    And поле confidence должно иметь диапазон от 0 до 1

  Scenario: Автозаполнение start_time/end_time из региона
    When я открываю главную страницу "/"
    Then должна быть функция для автозаполнения start_time и end_time из региона
    And функция должна использовать данные из текущего региона

  Scenario: Кнопка Save Annotation отправляет POST запрос
    When я открываю главную страницу "/"
    Then должна быть кнопка "Save Annotation"
    And кнопка должна иметь обработчик для отправки POST запроса
    And POST запрос должен отправляться на "/api/annotations"

  Scenario: Визуальная индикация сохранения
    When я открываю главную страницу "/"
    Then должен быть элемент для отображения сообщения об успехе
    And должен быть элемент для отображения сообщения об ошибке

  Scenario: Закрытие модального окна после сохранения
    When я открываю главную страницу "/"
    Then должна быть функция для закрытия модального окна
    And функция должна вызываться после успешного сохранения

  Scenario: Валидация на клиенте
    When я открываю главную страницу "/"
    Then должна быть функция валидации формы
    And функция должна проверять что event_label не пустой
    And функция должна проверять что confidence в диапазоне 0-1
