Feature: Улучшенные элементы управления масштабированием waveform

  Background:
    Given приложение запущено
    And аудио файл загружен в wavesurfer

  Scenario: Увеличение масштаба в 2 раза
    Given текущий масштаб установлен на 100 пикселей/сек
    When пользователь нажимает кнопку "Zoom In x2"
    Then масштаб должен стать 200 пикселей/сек
    And индикатор текущего масштаба должен обновиться

  Scenario: Уменьшение масштаба в 2 раза
    Given текущий масштаб установлен на 200 пикселей/сек
    When пользователь нажимает кнопку "Zoom Out x2"
    Then масштаб должен стать 100 пикселей/сек
    And индикатор текущего масштаба должен обновиться

  Scenario: Установка масштаба по длительности видимого окна
    Given пользователь вводит 60 секунд в поле длительности
    When пользователь нажимает кнопку "Zoom to Duration"
    Then видимая область waveform должна показывать примерно 60 секунд аудио
    And индикатор текущего масштаба должен показывать примерно "1:00"

  Scenario: Минимальное значение масштаба при Zoom Out
    Given текущий масштаб установлен на 10 пикселей/сек
    When пользователь нажимает кнопку "Zoom Out x2"
    Then масштаб должен стать 0 пикселей/сек
    And waveform должен отображаться на всю ширину контейнера

  Scenario: Отображение текущего масштаба в формате времени
    Given текущий масштаб соответствует 30 секундам на ширину экрана
    Then индикатор текущего масштаба должен показывать "30s"

  Scenario: Отображение текущего масштаба в минутах
    Given текущий масштаб соответствует 90 секундам на ширину экрана
    Then индикатор текущего масштаба должен показывать "1:30"

  Scenario: Отображение текущего масштаба в часах
    Given текущий масштаб соответствует 7200 секундам на ширину экрана
    Then индикатор текущего масштаба должен показывать "2:00:00"

  Scenario: Валидация ввода длительности
    When пользователь вводит "-10" в поле длительности
    And пользователь нажимает кнопку "Zoom to Duration"
    Then масштаб не должен измениться
    And должно отобразиться сообщение об ошибке "Длительность должна быть положительным числом"

  Scenario: Валидация максимального значения длительности
    When пользователь вводит "86400" в поле длительности
    And пользователь нажимает кнопку "Zoom to Duration"
    Then масштаб не должен измениться
    And должно отобразиться сообщение об ошибке "Длительность не может превышать 3600 секунд (1 час)"
